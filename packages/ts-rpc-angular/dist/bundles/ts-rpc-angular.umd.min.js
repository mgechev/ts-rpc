!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("@angular/platform-server"),require("@angular/core"),require("@angular/platform-browser"),require("@angular/common"),require("ts-rpc-reflect")):"function"==typeof define&&define.amd?define("ts-rpc-angular",["exports","@angular/platform-server","@angular/core","@angular/platform-browser","@angular/common","ts-rpc-reflect"],r):r((e=e||self)["ts-rpc-angular"]={},e.ng["platform-server"],e.ng.core,e.ng.platformBrowser,e.ng.common,e.tsRpcReflect)}(this,function(e,r,t,o,n,a){"use strict";var c=function(e,r,t){return e+"#"+r+"#"+JSON.stringify(t)},i=c;function l(e,r){return console.log("#######"),function(){console.log("Adding state to the DOM");var t=e.createElement("script");t.id=r+"-rpc",t.setAttribute("type","application/json"),t.textContent=o.ɵescapeHtml(JSON.stringify(s)),e.body.appendChild(t)}}var s={};var u=function(){function e(){}var o;return o=e,e.register=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return{ngModule:o,providers:[e,{provide:r.BEFORE_APP_SERIALIZED,useFactory:l,deps:[n.DOCUMENT,t.APP_ID],multi:!0}]}},e=o=function(e,r,t,o){var n,a=arguments.length,c=a<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,r,t,o);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(c=(a<3?n(c):a>3?n(r,t,c):n(r,t))||c);return a>3&&c&&Object.defineProperty(r,t,c),c}([t.NgModule({})],e)}();e.TSRPCAngularModule=u,e.serializeTransferStateFactory=l,e.wrapServices=function(e){return e.forEach(function(e){if(e.useClass){var r=e,t=function(e){for(var r=[],t=e.prototype;t;)r.push(t),t=Object.getPrototypeOf(t);var o=[],n=Object.getOwnPropertyDescriptors(e.prototype);return Object.keys(n).forEach(function(e){r.some(function(r){var t=Object.getOwnPropertyDescriptor(r,e);return t&&t.value[a.ɵTransferState]})&&o.push(e)}),o}(r.useClass);console.log("Decorating",t.length,"methods");var o=r.useClass.prototype;t.forEach(function(e){console.log("Decorating method");var r=o[e];console.log(r.toString()),o[e].__DECORATED__||(o[e]=function(){console.log("Delegating to original"),console.trace();var t=arguments;return r.apply(this,arguments).then(function(r){return console.log("Setting state key"),s[c(o.constructor.name,e,t)]=JSON.stringify(r),r})},o[e].__DECORATED__=!0)})}}),e},e.ɵ0=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ts-rpc-angular.umd.min.js.map